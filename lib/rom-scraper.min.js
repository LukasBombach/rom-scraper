!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("xml2json"),require("node-fetch"),require("query-string")):"function"==typeof define&&define.amd?define("rom-scraper",["xml2json","node-fetch","query-string"],t):"object"==typeof exports?exports["rom-scraper"]=t(require("xml2json"),require("node-fetch"),require("query-string")):e["rom-scraper"]=t(e.xml2json,e["node-fetch"],e["query-string"])}(this,function(e,t,r){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TheGamesDb=void 0;var o=r(1),a=n(o);t.TheGamesDb=a["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=r(2),s=n(f),c=r(3),p=n(c),d=r(4),m=n(d),h=r(5),y=n(h),g=r(6),v=n(g),b=function(e){function t(){return a(this,t),u(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),l(t,null,[{key:"_rom",value:function(e){return new v["default"]({title:e.GameTitle,alternateTitles:[e.AlternateTitles.title],releaseDate:new Date(e.ReleaseDate),description:e.Overview,genres:e.Genres.genre,players:parseInt(e.Players,10),coop:"Yes"===e["Co-op"],publisher:e.Publisher,developer:e.Developer,foreignIds:{theGamesDb:e.id},videos:[{url:e.Youtube}],images:t._romInfoImages(e)})}},{key:"_romInfoImages",value:function(e){var r=e.Images;return{boxart:t._romInfoBoxArt(r),banner:t._romInfoImage(r.banner),logo:t._romInfoImage(r.clearlogo),fanart:t._romInfoImageOrig(r.fanart),screenshot:t._romInfoImageOrig(r.screenshot)}}},{key:"_romInfoImage",value:function(e){var r=Array.isArray(e)?e:[e];return r.map(function(e){var r=e.width,n=e.height,o=e.$t;return{width:parseInt(r,10),height:parseInt(n,10),url:t._romInfoImageUrl(o)}})}},{key:"_romInfoImageOrig",value:function(e){var r=Array.isArray(e)?e:[e];return r.map(function(e){var r=e.original,n=r.width,o=r.height,a=r.$t;return{width:parseInt(n,10),height:parseInt(o,10),url:t._romInfoImageUrl(a)}})}},{key:"_romInfoBoxArt",value:function(e){var r=e.boxart,n=Array.isArray(r)?r:[r];return n.map(function(e){var r=e.width,n=e.height,o=e.side,a=e.$t;return{width:parseInt(r,10),height:parseInt(n,10),side:o,url:t._romInfoImageUrl(a)}})}},{key:"_romInfoImageUrl",value:function(e){return""+t._ART_BASE_URL+e}},{key:"_platform",value:function(e){var t=o({},y["default"].PLATFORMS.SNES,"Super Nintendo (SNES)");return t[e]||e}},{key:"_api",value:function(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n={method:"GET"},o=""+t._BASE_URL+e+".php?"+m["default"].stringify(r);return(0,p["default"])(o,n)}},{key:"_body",value:function(e){return e.text().then(function(e){return s["default"].toJson(e)}).then(function(e){return JSON.parse(e)}).then(function(e){return e.Data.Game})}},{key:"search",value:function(e){var r=e.name,n=e.platform,o=t._platform(n),a=t._api("GetGamesList",{name:r,platform:o});return a.then(t._body)}},{key:"getGame",value:function(e){var r=e.name,n=e.platform;return t.search({name:r,platform:n}).then(function(e){return t._api("GetGame",{id:e[0].id})}).then(t._body).then(t._rom).then(function(e){return e.getData()})}},{key:"_BASE_URL",get:function(){return"http://thegamesdb.net/api/"}},{key:"_ART_BASE_URL",get:function(){return"http://thegamesdb.net/banners/"}}]),t}(y["default"]);t["default"]=b,e.exports=t["default"]},function(e,t){e.exports=require("xml2json")},function(e,t){e.exports=require("node-fetch")},function(e,t){e.exports=require("query-string")},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){r(this,e)}return n(e,null,[{key:"search",value:function(e){e.name,e.platform;throw new Error('Method "search" has not been implemented.')}},{key:"getGame",value:function(t){t.name,t.platform;throw e.notImplementedError("getGame")}},{key:"notImplementedError",value:function(e){var t='Method "'+e+'" has not been implemented. ',r="Please override it in your class.";return new Error(t+r)}},{key:"PLATFORMS",get:function(){return{SNES:"SNES"}}}]),e}();t["default"]=o,e.exports=t["default"]},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t){r(this,e),this._data={},this.addData(t)}return n(e,[{key:"addData",value:function(t){Object.assign(this._data,e._clean(t))}},{key:"getData",value:function(){return this._data}}],[{key:"_clean",value:function(e){return{title:e.title,alternateTitles:e.alternateTitles,releaseDate:e.releaseDate,description:e.description,genres:e.genres,players:e.players,coop:e.coop,publisher:e.publisher,developer:e.developer,foreignIds:e.foreignIds,videos:e.videos,images:e.images}}}]),e}();t["default"]=o,e.exports=t["default"]}])});
//# sourceMappingURL=rom-scraper.min.js.map